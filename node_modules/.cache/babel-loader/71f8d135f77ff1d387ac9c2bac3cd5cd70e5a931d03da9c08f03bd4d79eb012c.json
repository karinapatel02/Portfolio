{"ast":null,"code":"import _classCallCheck from \"/Users/karina/KarinaPortfolio/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/karina/KarinaPortfolio/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _slicedToArray from \"/Users/karina/KarinaPortfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/* eslint-env browser */\nvar STYLES_HYDRATOR = /\\.([^{:]+)(:[^{]+)?{(?:[^}]*;)?([^}]*?)}/g;\nvar KEYFRAMES_HYRDATOR = /@keyframes ([^{]+){((?:(?:from|to|(?:\\d+\\.?\\d*%))\\{(?:[^}])*})*)}/g;\nvar FONT_FACE_HYDRATOR = /@font-face\\{font-family:([^;]+);([^}]*)\\}/g;\nfunction hydrateStyles(cache, hydrator, css) {\n  var match;\n  while (match = hydrator.exec(css)) {\n    var _match = match,\n      _match2 = _slicedToArray(_match, 4),\n      id = _match2[1],\n      pseudo = _match2[2],\n      key = _match2[3];\n    if (true && process.env.NODE_ENV !== \"production\" && window.__STYLETRON_DEVTOOLS__) {\n      hydrateDevtoolsRule(match[0]);\n    }\n    var fullKey = pseudo ? \"\".concat(pseudo).concat(key) : key;\n    cache.cache[fullKey] = id; // set cache without triggering side effects\n\n    cache.idGenerator.increment(); // increment id\n  }\n}\n\nfunction hydrate(cache, hydrator, css) {\n  var match;\n  while (match = hydrator.exec(css)) {\n    var _match3 = match,\n      _match4 = _slicedToArray(_match3, 3),\n      id = _match4[1],\n      key = _match4[2];\n    if (true && process.env.NODE_ENV !== \"production\" && window.__STYLETRON_DEVTOOLS__) {\n      hydrateDevtoolsRule(match[0]);\n    }\n    cache.cache[key] = id; // set cache without triggering side effects\n\n    cache.idGenerator.increment(); // increment id\n  }\n}\n\nimport SequentialIDGenerator from \"../sequential-id-generator\";\nimport { Cache, MultiCache } from \"../cache\";\nimport injectStylePrefixed from \"../inject-style-prefixed\";\nimport { styleBlockToRule, atomicSelector, keyframesBlockToRule, declarationsToBlock, keyframesToBlock, fontFaceBlockToRule } from \"../css\";\nimport { insertRuleIntoDevtools, hydrateDevtoolsRule } from \"../dev-tool\";\nvar StyletronClient = /*#__PURE__*/function () {\n  function StyletronClient() {\n    var _this = this;\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, StyletronClient);\n    this.styleElements = {};\n    var styleIdGenerator = new SequentialIDGenerator(opts.prefix);\n    var onNewStyle = function onNewStyle(cache, id, value) {\n      var pseudo = value.pseudo,\n        block = value.block;\n      var sheet = _this.styleElements[cache.key].sheet;\n      var selector = atomicSelector(id, pseudo);\n      var rule = styleBlockToRule(selector, block);\n      try {\n        sheet.insertRule(rule, sheet.cssRules.length);\n        if (true && process.env.NODE_ENV !== \"production\" && window.__STYLETRON_DEVTOOLS__) {\n          insertRuleIntoDevtools(selector, block);\n        }\n      } catch (e) {\n        if (process.env.NODE_ENV !== \"production\") {\n          // eslint-disable-next-line no-console\n          console.warn(\"Failed to inject CSS: \\\"\".concat(rule, \"\\\". Perhaps this has invalid or un-prefixed properties?\"));\n        }\n      }\n    }; // Setup style cache\n\n    this.styleCache = new MultiCache(styleIdGenerator, function (media, _cache, insertBeforeMedia) {\n      var styleElement = document.createElement(\"style\");\n      styleElement.media = media;\n      if (insertBeforeMedia === void 0) {\n        _this.container.appendChild(styleElement);\n      } else {\n        var insertBeforeIndex = findSheetIndexWithMedia(_this.container.children, insertBeforeMedia);\n        _this.container.insertBefore(styleElement, _this.container.children[insertBeforeIndex]);\n      }\n      _this.styleElements[media] = styleElement;\n    }, onNewStyle);\n    this.keyframesCache = new Cache(new SequentialIDGenerator(opts.prefix), function (cache, id, value) {\n      _this.styleCache.getCache(\"\");\n      var sheet = _this.styleElements[\"\"].sheet;\n      var rule = keyframesBlockToRule(id, keyframesToBlock(value));\n      try {\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== \"production\") {\n          // eslint-disable-next-line no-console\n          console.warn(\"Failed to inject CSS: \\\"\".concat(rule, \"\\\". Perhaps this has invalid or un-prefixed properties?\"));\n        }\n      }\n    });\n    this.fontFaceCache = new Cache(new SequentialIDGenerator(opts.prefix), function (cache, id, value) {\n      _this.styleCache.getCache(\"\");\n      var sheet = _this.styleElements[\"\"].sheet;\n      var rule = fontFaceBlockToRule(id, declarationsToBlock(value));\n      try {\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== \"production\") {\n          // eslint-disable-next-line no-console\n          console.warn(\"Failed to inject CSS: \\\"\".concat(rule, \"\\\". Perhaps this has invalid or un-prefixed properties?\"));\n        }\n      }\n    });\n    if (opts.container) {\n      this.container = opts.container;\n    } // Hydrate\n\n    if (opts.hydrate && opts.hydrate.length > 0) {\n      // infer container from parent element\n      if (!this.container) {\n        var parentElement = opts.hydrate[0].parentElement;\n        if (parentElement !== null && parentElement !== void 0) {\n          this.container = parentElement;\n        }\n      }\n      for (var i = 0; i < opts.hydrate.length; i++) {\n        var element = opts.hydrate[i];\n        var hydrateType = element.getAttribute(\"data-hydrate\");\n        if (hydrateType === \"font-face\") {\n          hydrate(this.fontFaceCache, FONT_FACE_HYDRATOR, element.textContent);\n          continue;\n        }\n        if (hydrateType === \"keyframes\") {\n          hydrate(this.keyframesCache, KEYFRAMES_HYRDATOR, element.textContent);\n          continue;\n        }\n        var key = element.media ? element.media : \"\";\n        this.styleElements[key] = element;\n        var cache = new Cache(styleIdGenerator, onNewStyle);\n        cache.key = key;\n        hydrateStyles(cache, STYLES_HYDRATOR, element.textContent);\n        this.styleCache.sortedCacheKeys.push(key);\n        this.styleCache.caches[key] = cache;\n      }\n    }\n    if (!this.container) {\n      if (document.head === null) {\n        throw new Error(\"No container provided and `document.head` was null\");\n      }\n      this.container = document.head;\n    }\n  }\n  _createClass(StyletronClient, [{\n    key: \"renderStyle\",\n    value: function renderStyle(style) {\n      return injectStylePrefixed(this.styleCache, style, \"\", \"\");\n    }\n  }, {\n    key: \"renderFontFace\",\n    value: function renderFontFace(fontFace) {\n      var key = declarationsToBlock(fontFace);\n      return this.fontFaceCache.addValue(key, fontFace);\n    }\n  }, {\n    key: \"renderKeyframes\",\n    value: function renderKeyframes(keyframes) {\n      var key = keyframesToBlock(keyframes);\n      return this.keyframesCache.addValue(key, keyframes);\n    }\n  }]);\n  return StyletronClient;\n}();\nexport default StyletronClient;\nfunction findSheetIndexWithMedia(children, media) {\n  var index = 0;\n  for (; index < children.length; index++) {\n    var child = children[index];\n    if (child.tagName === \"STYLE\" && child.media === media) {\n      return index;\n    }\n  }\n  return -1;\n}","map":{"version":3,"mappings":"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","names":["STYLES_HYDRATOR","KEYFRAMES_HYRDATOR","FONT_FACE_HYDRATOR","hydrateStyles","cache","hydrator","css","match","exec","id","pseudo","key","window","__STYLETRON_DEVTOOLS__","hydrateDevtoolsRule","fullKey","idGenerator","increment","hydrate","SequentialIDGenerator","Cache","MultiCache","injectStylePrefixed","styleBlockToRule","atomicSelector","keyframesBlockToRule","declarationsToBlock","keyframesToBlock","fontFaceBlockToRule","insertRuleIntoDevtools","StyletronClient","constructor","opts","styleElements","styleIdGenerator","prefix","onNewStyle","value","block","sheet","selector","rule","insertRule","cssRules","length","e","console","warn","styleCache","media","_cache","insertBeforeMedia","styleElement","document","createElement","container","appendChild","insertBeforeIndex","findSheetIndexWithMedia","children","insertBefore","keyframesCache","getCache","fontFaceCache","parentElement","i","element","hydrateType","getAttribute","textContent","sortedCacheKeys","push","caches","head","Error","renderStyle","style","renderFontFace","fontFace","addValue","renderKeyframes","keyframes","index","child","tagName"],"sources":["/Users/karina/KarinaPortfolio/node_modules/styletron-engine-atomic/dist-browser-esm/client/src/client/client.ts"],"sourcesContent":["/* eslint-env browser */\n\ndeclare var __DEV__: boolean;\n\ndeclare var __BROWSER__: boolean;\n\nconst STYLES_HYDRATOR = /\\.([^{:]+)(:[^{]+)?{(?:[^}]*;)?([^}]*?)}/g;\nconst KEYFRAMES_HYRDATOR =\n  /@keyframes ([^{]+){((?:(?:from|to|(?:\\d+\\.?\\d*%))\\{(?:[^}])*})*)}/g;\nconst FONT_FACE_HYDRATOR = /@font-face\\{font-family:([^;]+);([^}]*)\\}/g;\n\ntype hydratorT =\n  | typeof STYLES_HYDRATOR\n  | typeof KEYFRAMES_HYRDATOR\n  | typeof FONT_FACE_HYDRATOR;\n\nfunction hydrateStyles<T>(cache: Cache<T>, hydrator: hydratorT, css: string) {\n  let match;\n  while ((match = hydrator.exec(css))) {\n    const [, id, pseudo, key] = match;\n    if (__BROWSER__ && __DEV__ && window.__STYLETRON_DEVTOOLS__) {\n      hydrateDevtoolsRule(match[0]);\n    }\n    const fullKey = pseudo ? `${pseudo}${key}` : key;\n    cache.cache[fullKey] = id; // set cache without triggering side effects\n    cache.idGenerator.increment(); // increment id\n  }\n}\n\nfunction hydrate<T>(cache: Cache<T>, hydrator: hydratorT, css: string) {\n  let match;\n  while ((match = hydrator.exec(css))) {\n    const [, id, key] = match;\n    if (__BROWSER__ && __DEV__ && window.__STYLETRON_DEVTOOLS__) {\n      hydrateDevtoolsRule(match[0]);\n    }\n    cache.cache[key] = id; // set cache without triggering side effects\n    cache.idGenerator.increment(); // increment id\n  }\n}\n\nimport SequentialIDGenerator from \"../sequential-id-generator\";\n\nimport type {\n  StandardEngine,\n  KeyframesObject,\n  FontFaceObject,\n  StyleObject,\n} from \"styletron-standard\";\n\nimport {Cache, MultiCache} from \"../cache\";\n\nimport injectStylePrefixed from \"../inject-style-prefixed\";\n\nimport {\n  styleBlockToRule,\n  atomicSelector,\n  keyframesBlockToRule,\n  declarationsToBlock,\n  keyframesToBlock,\n  fontFaceBlockToRule,\n} from \"../css\";\nimport {insertRuleIntoDevtools, hydrateDevtoolsRule} from \"../dev-tool\";\n\ntype hydrateT =\n  | HTMLCollectionOf<HTMLStyleElement>\n  | Array<HTMLStyleElement>\n  | NodeListOf<HTMLStyleElement>;\n\ntype optionsT = {\n  hydrate?: hydrateT;\n  container?: Element;\n  prefix?: string;\n};\n\nclass StyletronClient implements StandardEngine {\n  container: Element;\n  styleElements: {\n    [x: string]: HTMLStyleElement;\n  };\n  fontFaceSheet: HTMLStyleElement;\n  keyframesSheet: HTMLStyleElement;\n\n  styleCache: MultiCache<{\n    pseudo: string;\n    block: string;\n  }>;\n  keyframesCache: Cache<KeyframesObject>;\n  fontFaceCache: Cache<FontFaceObject>;\n\n  constructor(opts: optionsT = {}) {\n    this.styleElements = {};\n\n    const styleIdGenerator = new SequentialIDGenerator(opts.prefix);\n    const onNewStyle = (cache, id, value) => {\n      const {pseudo, block} = value;\n      const sheet: CSSStyleSheet = this.styleElements[cache.key].sheet as any;\n      const selector = atomicSelector(id, pseudo);\n      const rule = styleBlockToRule(selector, block);\n      try {\n        sheet.insertRule(rule, sheet.cssRules.length);\n        if (__BROWSER__ && __DEV__ && window.__STYLETRON_DEVTOOLS__) {\n          insertRuleIntoDevtools(selector, block);\n        }\n      } catch (e) {\n        if (__DEV__) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `Failed to inject CSS: \"${rule}\". Perhaps this has invalid or un-prefixed properties?`,\n          );\n        }\n      }\n    };\n\n    // Setup style cache\n    this.styleCache = new MultiCache(\n      styleIdGenerator,\n      (media, _cache, insertBeforeMedia) => {\n        const styleElement = document.createElement(\"style\");\n        styleElement.media = media;\n        if (insertBeforeMedia === void 0) {\n          this.container.appendChild(styleElement);\n        } else {\n          const insertBeforeIndex = findSheetIndexWithMedia(\n            this.container.children,\n            insertBeforeMedia,\n          );\n          this.container.insertBefore(\n            styleElement,\n            this.container.children[insertBeforeIndex],\n          );\n        }\n\n        this.styleElements[media] = styleElement;\n      },\n      onNewStyle,\n    );\n\n    this.keyframesCache = new Cache(\n      new SequentialIDGenerator(opts.prefix),\n      (cache, id, value) => {\n        this.styleCache.getCache(\"\");\n        const sheet: CSSStyleSheet = this.styleElements[\"\"].sheet as any;\n        const rule = keyframesBlockToRule(id, keyframesToBlock(value));\n        try {\n          sheet.insertRule(rule, sheet.cssRules.length);\n        } catch (e) {\n          if (__DEV__) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `Failed to inject CSS: \"${rule}\". Perhaps this has invalid or un-prefixed properties?`,\n            );\n          }\n        }\n      },\n    );\n\n    this.fontFaceCache = new Cache(\n      new SequentialIDGenerator(opts.prefix),\n      (cache, id, value) => {\n        this.styleCache.getCache(\"\");\n        const sheet: CSSStyleSheet = this.styleElements[\"\"].sheet as any;\n        const rule = fontFaceBlockToRule(id, declarationsToBlock(value));\n        try {\n          sheet.insertRule(rule, sheet.cssRules.length);\n        } catch (e) {\n          if (__DEV__) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `Failed to inject CSS: \"${rule}\". Perhaps this has invalid or un-prefixed properties?`,\n            );\n          }\n        }\n      },\n    );\n\n    if (opts.container) {\n      this.container = opts.container;\n    }\n\n    // Hydrate\n    if (opts.hydrate && opts.hydrate.length > 0) {\n      // infer container from parent element\n      if (!this.container) {\n        const parentElement = opts.hydrate[0].parentElement;\n        if (parentElement !== null && parentElement !== void 0) {\n          this.container = parentElement;\n        }\n      }\n\n      for (let i = 0; i < opts.hydrate.length; i++) {\n        const element = opts.hydrate[i];\n        const hydrateType = element.getAttribute(\"data-hydrate\");\n        if (hydrateType === \"font-face\") {\n          hydrate(this.fontFaceCache, FONT_FACE_HYDRATOR, element.textContent);\n          continue;\n        }\n        if (hydrateType === \"keyframes\") {\n          hydrate(this.keyframesCache, KEYFRAMES_HYRDATOR, element.textContent);\n          continue;\n        }\n        const key = element.media ? element.media : \"\";\n        this.styleElements[key] = element;\n        const cache = new Cache(styleIdGenerator, onNewStyle);\n        cache.key = key;\n        hydrateStyles(cache, STYLES_HYDRATOR, element.textContent);\n        this.styleCache.sortedCacheKeys.push(key);\n        this.styleCache.caches[key] = cache;\n      }\n    }\n\n    if (!this.container) {\n      if (document.head === null) {\n        throw new Error(\"No container provided and `document.head` was null\");\n      }\n      this.container = document.head;\n    }\n  }\n\n  renderStyle(style: StyleObject): string {\n    return injectStylePrefixed(this.styleCache, style, \"\", \"\");\n  }\n\n  renderFontFace(fontFace: FontFaceObject): string {\n    const key = declarationsToBlock(fontFace);\n    return this.fontFaceCache.addValue(key, fontFace);\n  }\n\n  renderKeyframes(keyframes: KeyframesObject): string {\n    const key = keyframesToBlock(keyframes);\n    return this.keyframesCache.addValue(key, keyframes);\n  }\n}\n\nexport default StyletronClient;\n\nfunction findSheetIndexWithMedia(children, media) {\n  let index = 0;\n  for (; index < children.length; index++) {\n    const child = children[index];\n    if (\n      child.tagName === \"STYLE\" &&\n      (child as any as HTMLStyleElement).media === media\n    ) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}