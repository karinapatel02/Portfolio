{"ast":null,"code":"import _classCallCheck from \"/Users/karina/KarinaPortfolio/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/karina/KarinaPortfolio/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport SequentialIDGenerator from \"./sequential-id-generator\";\nimport sortMq from \"./sort-css-media-queries\";\nexport var MultiCache = /*#__PURE__*/function () {\n  function MultiCache(idGenerator, onNewCache, onNewValue) {\n    _classCallCheck(this, MultiCache);\n    this.idGenerator = idGenerator;\n    this.onNewCache = onNewCache;\n    this.onNewValue = onNewValue;\n    this.sortedCacheKeys = [];\n    this.caches = {};\n  }\n  _createClass(MultiCache, [{\n    key: \"getCache\",\n    value: function getCache(key) {\n      if (!this.caches[key]) {\n        var cache = new Cache(this.idGenerator, this.onNewValue);\n        cache.key = key;\n        this.sortedCacheKeys.push(key);\n        this.sortedCacheKeys.sort(sortMq);\n        var keyIndex = this.sortedCacheKeys.indexOf(key);\n        var insertBeforeMedia = keyIndex < this.sortedCacheKeys.length - 1 ? this.sortedCacheKeys[keyIndex + 1] : void 0;\n        this.caches[key] = cache;\n        this.onNewCache(key, cache, insertBeforeMedia);\n      }\n      return this.caches[key];\n    }\n  }, {\n    key: \"getSortedCacheKeys\",\n    value: function getSortedCacheKeys() {\n      return this.sortedCacheKeys;\n    }\n  }]);\n  return MultiCache;\n}();\nexport var Cache = /*#__PURE__*/function () {\n  function Cache(idGenerator, onNewValue) {\n    _classCallCheck(this, Cache);\n    this.cache = {};\n    this.idGenerator = idGenerator;\n    this.onNewValue = onNewValue;\n  }\n  _createClass(Cache, [{\n    key: \"addValue\",\n    value: function addValue(key, value) {\n      var cached = this.cache[key];\n      if (cached) {\n        return cached;\n      }\n      var id = this.idGenerator.next();\n      this.cache[key] = id;\n      this.onNewValue(this, id, value);\n      return id;\n    }\n  }]);\n  return Cache;\n}();","map":{"version":3,"mappings":";;AAAA,OAAOA,qBAAP,MAAkC,2BAAlC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AASA,WAAaC,UAAN;EASLC,oBACEC,WADS,EAETC,UAFS,EAGTC,UAHS,EAIT;IAAA;IACA,KAAKF,WAAL,GAAmBA,WAAnB;IACA,KAAKC,UAAL,GAAkBA,UAAlB;IACA,KAAKC,UAAL,GAAkBA,UAAlB;IACA,KAAKC,eAAL,GAAuB,EAAvB;IACA,KAAKC,MAAL,GAAc,EAAd;EACD;EAAA;IAAA;IAAA,OAEDC,kBAASC,GAAD,EAAwB;MAC9B,IAAI,CAAC,KAAKF,MAAL,CAAYE,GAAZ,CAAL,EAAuB;QACrB,IAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAU,KAAKR,WAAf,EAA4B,KAAKE,UAAjC,CAAd;QACAK,KAAK,CAACD,GAAN,GAAYA,GAAZ;QACA,KAAKH,eAAL,CAAqBM,IAArB,CAA0BH,GAA1B;QACA,KAAKH,eAAL,CAAqBO,IAArB,CAA0Bb,MAA1B;QACA,IAAMc,QAAQ,GAAG,KAAKR,eAAL,CAAqBS,OAArB,CAA6BN,GAA7B,CAAjB;QACA,IAAMO,iBAAiB,GACrBF,QAAQ,GAAG,KAAKR,eAAL,CAAqBW,MAArB,GAA8B,CAAzC,GACI,KAAKX,eAAL,CAAqBQ,QAAQ,GAAG,CAAhC,CADJ,GAEI,KAAK,CAHX;QAIA,KAAKP,MAAL,CAAYE,GAAZ,IAAmBC,KAAnB;QACA,KAAKN,UAAL,CAAgBK,GAAhB,EAAqBC,KAArB,EAA4BM,iBAA5B;MACD;MACD,OAAO,KAAKT,MAAL,CAAYE,GAAZ,CAAP;IACD;EAAA;IAAA;IAAA,OAEDS,8BAAqB;MACnB,OAAO,KAAKZ,eAAZ;IACD;EAAA;EAAA;AAAA;AAGH,WAAaK,KAAN;EAQLT,eACEC,WADS,EAETE,UAFS,EAGT;IAAA;IACA,KAAKK,KAAL,GAAa,EAAb;IACA,KAAKP,WAAL,GAAmBA,WAAnB;IACA,KAAKE,UAAL,GAAkBA,UAAlB;EACD;EAAA;IAAA;IAAA,OAEDc,kBAASV,GAAD,EAAcW,KAAd,EAAwB;MAC9B,IAAMC,MAAM,GAAG,KAAKX,KAAL,CAAWD,GAAX,CAAf;MACA,IAAIY,MAAJ,EAAY;QACV,OAAOA,MAAP;MACD;MACD,IAAMC,EAAE,GAAG,KAAKnB,WAAL,CAAiBoB,IAAjB,EAAX;MACA,KAAKb,KAAL,CAAWD,GAAX,IAAkBa,EAAlB;MACA,KAAKjB,UAAL,CAAgB,IAAhB,EAAsBiB,EAAtB,EAA0BF,KAA1B;MACA,OAAOE,EAAP;IACD;EAAA;EAAA;AAAA","names":["SequentialIDGenerator","sortMq","MultiCache","constructor","idGenerator","onNewCache","onNewValue","sortedCacheKeys","caches","getCache","key","cache","Cache","push","sort","keyIndex","indexOf","insertBeforeMedia","length","getSortedCacheKeys","addValue","value","cached","id","next"],"sources":["/Users/karina/KarinaPortfolio/node_modules/styletron-engine-atomic/dist-browser-esm/src/cache.ts"],"sourcesContent":["import SequentialIDGenerator from \"./sequential-id-generator\";\nimport sortMq from \"./sort-css-media-queries\";\n\ntype OnNewCacheFn<T> = (\n  key: string,\n  cache: Cache<T>,\n  value?: string | null,\n) => any;\ntype OnNewValueFn<T> = (cache: Cache<T>, id: string, value: T) => any;\n\nexport class MultiCache<T> {\n  caches: {\n    [x: string]: Cache<T>;\n  };\n  idGenerator: SequentialIDGenerator;\n  onNewCache: OnNewCacheFn<T>;\n  onNewValue: OnNewValueFn<T>;\n  sortedCacheKeys: string[];\n\n  constructor(\n    idGenerator: SequentialIDGenerator,\n    onNewCache: OnNewCacheFn<T>,\n    onNewValue: OnNewValueFn<T>,\n  ) {\n    this.idGenerator = idGenerator;\n    this.onNewCache = onNewCache;\n    this.onNewValue = onNewValue;\n    this.sortedCacheKeys = [];\n    this.caches = {};\n  }\n\n  getCache(key: string): Cache<T> {\n    if (!this.caches[key]) {\n      const cache = new Cache(this.idGenerator, this.onNewValue);\n      cache.key = key;\n      this.sortedCacheKeys.push(key);\n      this.sortedCacheKeys.sort(sortMq);\n      const keyIndex = this.sortedCacheKeys.indexOf(key);\n      const insertBeforeMedia =\n        keyIndex < this.sortedCacheKeys.length - 1\n          ? this.sortedCacheKeys[keyIndex + 1]\n          : void 0;\n      this.caches[key] = cache;\n      this.onNewCache(key, cache, insertBeforeMedia);\n    }\n    return this.caches[key];\n  }\n\n  getSortedCacheKeys() {\n    return this.sortedCacheKeys;\n  }\n}\n\nexport class Cache<T> {\n  cache: {\n    [x: string]: string;\n  };\n  idGenerator: SequentialIDGenerator;\n  key: string;\n  onNewValue: (cache: Cache<T>, id: string, value: any) => any;\n\n  constructor(\n    idGenerator: SequentialIDGenerator,\n    onNewValue: (cache: Cache<T>, id: string, value: any) => any,\n  ) {\n    this.cache = {};\n    this.idGenerator = idGenerator;\n    this.onNewValue = onNewValue;\n  }\n\n  addValue(key: string, value: T) {\n    const cached = this.cache[key];\n    if (cached) {\n      return cached;\n    }\n    const id = this.idGenerator.next();\n    this.cache[key] = id;\n    this.onNewValue(this, id, value);\n    return id;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}